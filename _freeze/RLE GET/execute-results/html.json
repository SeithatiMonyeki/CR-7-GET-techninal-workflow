{
  "hash": "9c61cb991fe77366518bbaed803e56e2",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"7th Country Reporting\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n#if (!requireNamespace(c(\"magrittr\",\"dplyr\", \"ggplot2\", \"ggthemes\"), quietly = TRUE)) {\n#  install.packages(c(\"magrittr\",\"dplyr\", \"ggplot2\", \"ggthemes\"))\n#}\n\n#devtools::install_github(\"SANBI-NBA/nbaR\", force = T)\n\nlibrary(nbaR)\nlibrary(dplyr)\nlibrary(tidyr)\n#library(stringi)\nlibrary(rlang)\nlibrary(gt)\nlibrary(ggplot2)\nlibrary(here)\n```\n:::\n\n\n\n\n::: scrolling\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nEDD.GET_names <- read.csv(\"./data/EDD_GET levels names.csv\") %>%\n                 mutate(GET_L2.code_text = paste(IUCN_GET_2025_L2, GET_L2.text, sep = \": \")) %>%\n                 mutate(GET_L3.code_text = paste(IUCN_GET_2022_L3, GET_L3.text, sep = \": \")) %>%\n                 select(Realm_GETL1, Code, EcosystemType_GETLevel5_6, RLE_2025, EPL_2025, IUCN_GET_2025_L2, IUCN_GET_2022_L3, GET_L2.code_text, GET_L3.code_text) %>%\n\n                 mutate(Realm = case_when(Realm_GETL1 == \"Freshwater_Wetland\" ~ \"Wetland\",\n                                          Realm_GETL1 == \"Freshwater_River\"   ~ \"River\", TRUE ~ Realm_GETL1),\n                        \n                        RLE_2025 = factor(RLE_2025, levels = c(\"LC\", \"NT\", \"VU\", \"EN\", \"CR\"), \n                                                    labels = c(\"Least Concern\", \"Near Threatened\",\"Vulnerable\", \"Endangered\", \"Critically Endangered\")))\n```\n:::\n\n\n\n:::\n\n::: scrolling\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# ----------\n# 1. GET_L3 \n# ----------\n\n#  -------1. Number of GET Level 2 per Realm per Threat Status -------\nGET_L2.count <- EDD.GET_names %>%\n                group_by(Realm, RLE_2025) %>%\n                summarise(Count = n_distinct(GET_L2.code_text), .groups = \"drop\")  %>%\n                           tidyr::pivot_wider(names_from = RLE_2025,\n                                       values_from = Count,\n                                       values_fill = 0) \n\n#  -------2. Number of Ecosystem Types (GET_L5/6) per GET_L2 per Threat Status within each Realm -------\nGET_L2.ecosytems_count <- EDD.GET_names %>%\n                     group_by(Realm, IUCN_GET_2025_L2, GET_L2.code_text, RLE_2025) %>%\n                     summarise(Count = n_distinct(EcosystemType_GETLevel5_6), .groups = \"drop\")  %>%\n                           tidyr::pivot_wider(names_from = RLE_2025,\n                                       values_from = Count,\n                                       values_fill = 0)\n\n# ----------\n# 2. GET_L3 \n# ----------\n\n#  -------1. Number of GET Level 2 per Realm per Threat Status -------\nGET_L3.count <- EDD.GET_names %>%\n                group_by(Realm, RLE_2025) %>%\n                summarise(Count = n_distinct(GET_L3.code_text), .groups = \"drop\")%>%\n                           tidyr::pivot_wider(names_from = RLE_2025,\n                                       values_from = Count,\n                                       values_fill = 0) \n\n\n\n#  -------2. Number of Ecosystem Types (GET_L5/6) per GET_L2 per Threat Status within each Realm -------\nGET_L3.ecosytems_count <- EDD.GET_names %>%\n                     group_by(Realm, IUCN_GET_2022_L3, GET_L3.code_text, RLE_2025) %>%\n                     summarise(Count = n_distinct(EcosystemType_GETLevel5_6), .groups = \"drop\")  %>%\n                           tidyr::pivot_wider(names_from = RLE_2025,\n                                       values_from = Count,\n                                       values_fill = 0)\n\n\nfiles <- list(GET_L2.count = GET_L2.count,\n              GET_L3.count = GET_L3.count,\n              GET_L2.ecosytems_count = GET_L2.ecosytems_count,\n              GET_L3.ecosytems_count = GET_L3.ecosytems_count)\n\npurrr::iwalk(files, ~ writexl::write_xlsx(.x, paste0(\"./data/\", .y, \".xlsx\")))\n```\n:::\n\n\n\n:::\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n## \n\n::: scrolling\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nGET_L2.realm <- plot_rle_bar_wide(GET_L2.count,\n                                  group_var  = Realm,\n                                  levels_vec = unique(GET_L2.ecosytems_count$Realm),\n                                  y_label    = \"Realm\",\n                                   bar_width  = 0.5)\n\nGET_L3.realm <- plot_rle_bar_wide(GET_L3.count,\n                                  group_var  = Realm,\n                                  levels_vec = unique(GET_L3.ecosytems_count$Realm),\n                                  y_label    = \"Realm\",\n                                   bar_width  = 0.5)\n```\n:::\n\n\n\n:::\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](RLE-GET_files/figure-html/unnamed-chunk-5-1.png){width=100%}\n:::\n:::\n\n\n\n\n\n## Global Ecosystem Typology Level 2\n\n::: scrolling\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nall_L2 <- GET_L2.ecosytems_count %>%\n          pull(IUCN_GET_2025_L2) %>%\n          unique()\n\nTerr.GET_L2 <- GET_L2.ecosytems_count %>%\n               filter(Realm == \"Terrestrial\") %>%\n               plot_rle_bar_wide(group_var  = IUCN_GET_2025_L2,\n                                 levels_vec = all_L2,\n                                 y_label    = \"Terrestrial\",\n                                 bar_width  = 0.65)\n\nRiver.GET_L2 <- GET_L2.ecosytems_count %>%\n                filter(Realm == \"River\") %>%\n                plot_rle_bar_wide(group_var  = IUCN_GET_2025_L2,\n                                  levels_vec = all_L2,\n                                  y_label    = \"River\",\n                                  bar_width  = 0.15)\n\nWetland.GET_L2 <- GET_L2.ecosytems_count %>%\n                  filter(Realm == \"Wetland\") %>%\n                  plot_rle_bar_wide(group_var  = IUCN_GET_2025_L2,\n                                    levels_vec = all_L2,\n                                    y_label    = \"Wetland\",\n                                    bar_width  = 0.3)\n\nEstuarine.GET_L2 <- GET_L2.ecosytems_count %>%\n                    filter(Realm == \"Estuarine\") %>%\n                    plot_rle_bar_wide(group_var  = IUCN_GET_2025_L2,\n                                      levels_vec = all_L2,\n                                      y_label    = \"Estuarine\",\n                                      bar_width  = 0.15)\n\nMarine.GET_L2 <- GET_L2.ecosytems_count %>%\n                 filter(Realm == \"Marine\") %>%\n                 plot_rle_bar_wide(group_var  = IUCN_GET_2025_L2,\n                                   levels_vec = all_L2,\n                                   y_label    = \"Marine\",\n                                   bar_width  = 0.4)\n```\n:::\n\n\n\n:::\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](RLE-GET_files/figure-html/unnamed-chunk-7-1.png){width=100%}\n:::\n:::\n\n\n\n\n\n\n## Global Ecosystem Typology Level 3\n\n::: scrolling\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nall_L3 <- GET_L3.ecosytems_count %>%\n          pull(IUCN_GET_2022_L3) %>%\n          unique()\n\nTerr.GET_L3 <- GET_L3.ecosytems_count %>%\n               filter(Realm == \"Terrestrial\") %>%\n               plot_rle_bar_wide(group_var  = IUCN_GET_2022_L3,\n                                 levels_vec = all_L3,\n                                 y_label    = \"Terrestrial\",\n                                 bar_width  = 0.55)\n\nRiver.GET_L3 <- GET_L3.ecosytems_count %>%\n                filter(Realm == \"River\") %>%\n                plot_rle_bar_wide(group_var  = IUCN_GET_2022_L3,\n                                  levels_vec = all_L3,\n                                  y_label    = \"River\",\n                                  bar_width  = 0.33)\n\nWetland.GET_L3 <- GET_L3.ecosytems_count %>%\n                  filter(Realm == \"Wetland\") %>%\n                  plot_rle_bar_wide(group_var  = IUCN_GET_2022_L3,\n                                    levels_vec = all_L3,\n                                    y_label    = \"Wetland\",\n                                    bar_width  = 0.3)\n\nEstuarine.GET_L3 <- GET_L3.ecosytems_count %>%\n                    filter(Realm == \"Estuarine\") %>%\n                    plot_rle_bar_wide(group_var  = IUCN_GET_2022_L3,\n                                      levels_vec = all_L3,\n                                      y_label    = \"Estuarine\",\n                                      bar_width  = 0.18)\n\nMarine.GET_L3 <- GET_L3.ecosytems_count %>%\n                 filter(Realm == \"Marine\") %>%\n                 plot_rle_bar_wide(group_var  = IUCN_GET_2022_L3,\n                                   levels_vec = all_L3,\n                                   y_label    = \"Marine\",\n                                   bar_width  = 0.7)\n```\n:::\n\n\n\n:::\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](RLE-GET_files/figure-html/unnamed-chunk-9-1.png){width=100%}\n:::\n:::\n\n\n\n\n:::",
    "supporting": [
      "RLE-GET_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}